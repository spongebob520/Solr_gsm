一、类说明
1、changeField类：
①getField()函数得到库的fields列表；
②addField()函数判断field是否在库中已有定义，没有的话添加；
③deleteField()函数删除不想要的field；
④deleteIndex()函数删除doc；
⑤initializtion()函数用来初始化新创建的库；
⑥定义：field = changeField()，用于之后介绍。
⑦最近更新：2017.1.19

2、solrAdd类：
①solrAddtxt()函数对txt数据建立索引（四列或者两列的格式化txt）；
②solrAddinfo()函数对info数据建立索引；
③solrAdddesc()函数对desc数据建立索引；
④定义：add = solrAdd()，用于之后介绍。
⑤最近更新：2017.1.19

3、API类：
①getPort()函数得到一个json或者xml或者python；
②定义：port = API()。
③最近更新：2017.1.19


二、运行脚本说明
1、API_run.py得到json
Usage:python API_run.py <需要更新的库地址> <输出格式> <主检查字段> <匹配字段（可无）>
Example:python API_run.py  http://localhost:8983/solr/voice/ json dinobot_shenjingwaike_20160418_txt 肌肉

2、run.py用来post三种文本数据（txt,info,desc），包括第一次建立库对库的初始化
Usage:python run.py <最顶层目录> <需要更新的库地址>
Example:python run.py /work/voice_data/ http://localhost:8983/solr/voice/

三、创建一个库的流程
1、bin/solr creat -c <库的名称>
2、运行run.py,脚本中已经包含了对库的初始化(如果使用以创建好的库，可以把初始化的函数注释掉)，注意输入参数时库地址，以及所有数据的存放目录。脚本中建立了循环，遍历每一个数据ID
3、想要得到符合某一字段的json数据，运行API_run.py
4、如果用到solr/collection/browse的功能，想要实现按照三种文本分类，在/serve/solr/collection/cong/solrconfig.xml的/browse中添加如下内容，就可以按照type来分类。
<!-- Faceting defaults -->
<str name="facet">on</str>
<str name="facet.missing">true</str>
<str name="facet.field">type</str>

四、类中函数的详细介绍
1、changeField类：
①getField():
# ****************************************************************************************************#
# 用法：list = field.getField(url)
# 参数：url是库的连接地址，链接到库，例：url = 'http://localhost:8983/solr/voice/'这是连接到库voice的地址
# 结果：得到一个list，list是库配置文件中已定义的field
# 最近更新：2017.1.19
# ****************************************************************************************************#
②addField():
# **********************************************************************************************************************************#
# 用法：field.addField(field_name,list,url)
# 参数：field_name即要检查的字段名字，list即库以有field的合集，url是库的连接地址，例：url = 'http://localhost:8983/solr/voice/'这是连接到库voice的地址
# 结果：检查field_name是否已在配置文件中定义过，没有的话同时添加field和copyfiled
# 说明：1、代码中单独列出了对text字段和type字段的定义，text的作用是用来映射其他字段，type只需要建立索引不需要存储，所以单独定义；
#       2、目前我们对field定义时，默认格式为text_general，并且都建立索引且存储，即对应字段按照文本存储，并且可以显示出来。
# 最近更新：2017.1.19
# **********************************************************************************************************************************#
③deleteField():
# ****************************************************************#
# 用法：field.deleteField(field_name,url)
# 参数：field_name即要删除的字段名字，url是库的连接地址，例：url = 'http://localhost:8983/solr/voice/
# 结果：同时删除了filed_name的copyfield和field定义，一定要先删除copyfield，才能删除field
# 最近更新：2017.1.19
# ****************************************************************#
④initializtion()：
# ****************************************************************************************************#
# 用法：list = field.initializtion(url)
# 参数：url是库的连接地址，链接到库，例：url = 'http://localhost:8983/solr/voice/'这是连接到库voice的地址
# 结果：对新建立的库的配置文件进行初始化，创建一些必要的定义，只需一次就可以
# 最近更新：2017.1.19
# ****************************************************************************************************#

2、solrAdd类：
①solrAddtxt()：
# ********************************************************************************************************************************#
# 用法：add.solrAddtxt(data_path,url)
# 参数：data_path为要建立索引的某份数据的地址，url是库的连接地址，链接到库，例：url = 'http://localhost:8983/solr/voice/'这是连接到库voice的地址
# 结果：对data_path下annotation下对应的txt(如果存在且命名格式正确的话)建立索引
# 说明：1、针对voice内的txt，因为voice内的txt是格式化的，分4列或两列，如果数据出现三列则会出现问题，
#       2、对两列txt建立的字段分别为name和content，对四列建立的字段分别为name、begin、end、content，
#       3、如果想要更换每列对应字段，除了对变量shell内容里的“&filenames=”进行更改，还要对初始化函数（change_file.py）的几个默认添加进行更改，
# 最近更新：2017.1.19
# ********************************************************************************************************************************#
②solrAddinfo()：
# ********************************************************************************************************************************#
# 用法：add.solrAddinfo(data_path,url)
# 参数：data_path为要建立索引的某份数据的地址，url是库的连接地址，链接到库，例：url = 'http://localhost:8983/solr/voice/'这是连接到库voice的地址
# 结果：对data_path下对应的info(如果存在且命名格式正确的话)建立索引
# 说明：1、对info文件建立索引，默认是按照第一行为索引字段（field）的，如果缺失字段会自动添加
#       2、可能会出现的问题，如果第一行是5列，之后每行为4列，即一列内容为空，最好空的一列有空格符，否则可能出现索引内容无法匹配，导致数据无法post全面
# 最近更新：2017.1.19
# ********************************************************************************************************************************#
③solrAdddesc()：
# ******************************************************************************************************#
# 用法：add.solrAdddesc(data_path,url)
# 参数：data_path为要建立索引的某份数据的地址，url是库的连接地址，链接到库，例：url = 'http://localhost:8983/solr/voice/'这是连接到库voice的地址
# 结果：对data_path下对应的desc(如果存在且命名格式正确的话)建立索引
# 说明：1、对desc文件建立索引，默认是按照第一列为索引字段（field）的，如果缺失字段会自动添加
#       2、voice、medical数据都可以用，只要注意data_path和url地址即可
# 最近更新：2017.1.19
# ******************************************************************************************************#

3、API类：
①getPort()：
# *********************************************************************************************************************#
# 用法：dict = port.getPort(q,url,type,*fq)
# 参数：q为查询的主字段；url是库的连接地址，例：url = 'http://localhost:8983/solr/voice/'连接到voice库的地址；
#       type为查询结果希望输出的格式，常用的有json，xml，python，ruby，php；*fq为过滤查询，是一个主元，根据输入
#        参数的数量变化，是在主字段q下进一步匹配。
# 结果：得到查询结果，以type类型保存在字典dict中
# 说明：1、主字段内容q比较重要，一般是数据ID的话查询比较准确，如果想得到某数据的txt(info)数据，q设置为“数据ID_txt(info)”，
#          查询desc的话q设置为数据ID就可以了，设置一个fq为desc；
#       2、solr在创建库之后/serve/solr/colection/conf/solrconfig.xml内/select默认显示是10个document，但有的时候我们的数据
#          docs数远远超过10，所以要手动更改一下。
# 最近更新：2017.1.19
# *********************************************************************************************************************#


